version: 3
vars:
  cross_env: npx cross-env
  mocha_bin: npx mocha
  c8_bin: npx c8

  test_prefix: "{{ .cross_env }} MOCHA_SUITE_NAME"
  reporter_prefix: "{{ .c8_bin }} --report-dir"
  reporter_options_prefix: --reporter-options configFile=mocha-multi-reporter.json,cmrOutput=mocha-junit-reporter+mochaFile+junit

tasks:
  test-setup:
    cmds:
      - SOLO_CLUSTER_DUALITY=1 sh {{.TASKFILE_DIR}}/test/e2e/dual-cluster/setup-dual-e2e.sh

  dual-cluster-setup:
    cmds:
      - sh {{.TASKFILE_DIR}}/test/e2e/dual-cluster/setup-dual-e2e.sh

  test-update-markdown:
    cmd: |
      docs/site/wrapper_for_update_md.sh

  test-sdk-longterm:
    cmd: |
      ./quick_launch.sh
